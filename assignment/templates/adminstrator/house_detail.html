{% extends 'adminstrator/base.html' %}
{% block title %}House Details - {{ house.house_number }}{% endblock %}

{% block content %}
    <div class="page-header">
        <h1>House Details</h1>
        <p>{{ house.house_number }} - {{ house.address }}</p>
    </div>

    <div class="card">
        <div class="card-body">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                <div>
                    <strong>House Number:</strong><br>
                    <span style="color: #666;">{{ house.house_number }}</span>
                </div>
                <div>
                    <strong>Property Type:</strong><br>
                    <span style="color: #666;">{{ house.get_property_type_display }}</span>
                </div>
                <div>
                    <strong>Bedrooms:</strong><br>
                    <span style="color: #666;">{{ house.bedrooms }}</span>
                </div>
                <div>
                    <strong>Bathrooms:</strong><br>
                    <span style="color: #666;">{{ house.bathrooms }}</span>
                </div>
                <div>
                    <strong>Square Footage:</strong><br>
                    <span style="color: #666;">{{ house.square_footage }}</span>
                </div>
                <div>
                    <strong>Status:</strong><br>
                    {% if house.is_occupied %}
                        <span class="badge" style="background: #d4edda; color: #155724;">Occupied</span>
                    {% else %}
                        <span class="badge" style="background: #f8d7da; color: #721c24;">Vacant</span>
                    {% endif %}
                </div>
            </div>

            {% if house.qr_code_data %}
            <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6;">
                <h3>QR Code</h3>
                {% if 'data:image/svg+xml' in house.qr_code_data %}
                    <!-- SVG QR Code -->
                    <div style="display: inline-block; border: 2px solid #ddd; border-radius: 8px; padding: 10px;">
                        {% autoescape off %}
                        {{ house.qr_code_data|safe }}
                        {% endautoescape %}
                    </div>
                {% else %}
                    <!-- PNG QR Code -->
                    <img src="{{ house.qr_code_data }}" alt="QR Code for {{ house.house_number }}" style="max-width: 200px; border: 2px solid #ddd; border-radius: 8px;">
                {% endif %}
                <p style="color: #666; margin-top: 10px;">Scan to view house details</p>
            </div>
            {% endif %}
        </div>
        <div class="detail-row">
            <span class="detail-label">Address:</span>
            <span class="detail-value">{{ house.address }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Owner:</span>
            <span class="detail-value">{{ house.owner.get_full_name|default:house.owner.username }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Date Registered:</span>
            <span class="detail-value">{{ house.date_registered|date:"M d, Y H:i" }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Property Type:</span>
            <span class="detail-value">{{ house.get_property_type_display }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Bedrooms:</span>
            <span class="detail-value">{{ house.bedrooms }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Bathrooms:</span>
            <span class="detail-value">{{ house.bathrooms }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Square Footage:</span>
            <span class="detail-value">{{ house.square_footage }}</span>
        </div>
        <div class="detail-row">
            <span class="detail-label">Status:</span>
            <span class="detail-value">{{ house.is_occupied|yesno:"Occupied,Vacant" }}</span>
        </div>
        
        {% if house.qr_code_data %}
        <div class="qr-code">
            <h3>QR Code</h3>
            {% if 'data:image/svg+xml' in house.qr_code_data %}
                <!-- SVG QR Code -->
                <div style="display: inline-block; border: 2px solid #ddd; border-radius: 8px; padding: 10px;">
                    {% autoescape off %}
                    {{ house.qr_code_data|safe }}
                    {% endautoescape %}
                </div>
            {% else %}
                <!-- PNG QR Code -->
                <img src="{{ house.qr_code_data }}" alt="QR Code for {{ house.house_number }}" style="max-width: 200px; border: 2px solid #ddd; border-radius: 8px;">
            {% endif %}
                <p style="color: #666; margin-top: 10px;">Scan to view house details</p>
            </div>
            {% endif %}
        </div>
    </div>
{% endblock %}